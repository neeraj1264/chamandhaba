let menubar=document.querySelector("#menu-bars"),mynav=document.querySelector(".navbar");menubar.onclick=()=>{menubar.classList.toggle("fa-times"),mynav.classList.toggle("active")};const navbarItems=document.querySelectorAll(".navbar a:not(#menu-bars)");navbarItems.forEach((e=>{e.addEventListener("click",(()=>{mynav.classList.contains("active")&&(menubar.classList.toggle("fa-times"),mynav.classList.toggle("active"))}))}));var cartData={};let cartCount=0,cartCountElement=document.getElementById("cart-count");function handleAddToCartClick(e){const t=e.target.closest(".add-to-cart");if(t){const e=t.parentNode.querySelector(".quantity-control");t.style.display="none",e.style.display="flex",cartCount++,cartCountElement.textContent=cartCount}}function calculateitemTotal(){let e=0;for(const t in cartData)cartData.hasOwnProperty(t)&&(e+=cartData[t].quantity*cartData[t].price);return`₹ ${e.toFixed(2)}`}function calculateTotal(){let e=20;for(const t in cartData)cartData.hasOwnProperty(t)&&(e+=cartData[t].quantity*cartData[t].price);return`₹ ${e.toFixed(2)}`}function getRandom4DigitNumber(){return Math.floor(1e3+9e3*Math.random())}function submitOrder(e){const t=getRandom4DigitNumber(),n=JSON.parse(localStorage.getItem("userData"))||{mobileNumber:"N/A",name:"Guest Customer",address:"..."};var a=`Order      : *ORD-${t}*\n`;a+=`Phone    : *${n.mobileNumber}*\n`,a+=`Name     : *${n.name}*\n`,a+=`Amount : *${calculateTotal()}*\n`,a+=`Address : *${n.address}*\n\n`,a+="----------items----------\n\n";for(const t in e)if(e.hasOwnProperty(t)){const n=e[t];a+=`${n.quantity}.0 x   ${n.name} = ₹ ${n.price}\n`}a+="Service Charge = ₹ 20.00\n";var o="https://api.whatsapp.com/send?phone=+919896755380&text="+encodeURIComponent(a);window.open(o,"_blank")}document.querySelector(".paneer").addEventListener("click",(e=>{handleAddToCartClick(e)})),document.querySelector(".mushroom").addEventListener("click",(e=>{handleAddToCartClick(e)})),document.querySelector(".dal").addEventListener("click",(e=>{handleAddToCartClick(e)})),document.querySelector(".kofta").addEventListener("click",(e=>{handleAddToCartClick(e)})),document.querySelector(".chaap").addEventListener("click",(e=>{handleAddToCartClick(e)})),document.querySelector(".chana").addEventListener("click",(e=>{handleAddToCartClick(e)})),document.querySelector(".vegetable").addEventListener("click",(e=>{handleAddToCartClick(e)})),document.querySelector(".rice").addEventListener("click",(e=>{handleAddToCartClick(e)})),document.querySelector(".naan").addEventListener("click",(e=>{handleAddToCartClick(e)})),document.querySelector(".roti").addEventListener("click",(e=>{handleAddToCartClick(e)})),document.querySelector(".paratha").addEventListener("click",(e=>{handleAddToCartClick(e)})),document.querySelector(".rayta").addEventListener("click",(e=>{handleAddToCartClick(e)})),document.querySelector(".salad").addEventListener("click",(e=>{handleAddToCartClick(e)})),document.querySelector(".chinese").addEventListener("click",(e=>{handleAddToCartClick(e)}));let isCartModalOpen=!1;function showCartModal(){if(0===Object.keys(cartData).length)return void closeCartModal();if(document.getElementById("cartModal").style.display="block",isCartModalOpen=!0,document.getElementById("dark-mode-toggle").style.display="none",cartCount<1)return alert("Please add items to the cart first."),void closeCartModal();document.getElementById("cartModal").style.display="block";const e=document.getElementById("cartItems");e.innerHTML="",e.style.maxHeight="500px",e.style.overflowX="auto";const t=document.createElement("table");t.classList.add("cart-table");const n=document.createElement("tr"),a=["Image","Name","Quantity","Price"];for(const e of a){const t=document.createElement("th");t.textContent=e,"Name"!==e&&"Quantity"!==e&&"Image"!==e&&"Price"!==e||t.classList.add("header-spaced"),n.appendChild(t)}t.appendChild(n);for(const e in cartData)if(cartData.hasOwnProperty(e)){const n=cartData[e],a=document.createElement("tr"),o=document.createElement("td");o.classList.add("center-align");const c=document.createElement("img");c.src=n.image,c.alt=n.name,o.appendChild(c),a.appendChild(o);const d=document.createElement("td");d.classList.add("center-align"),d.textContent=n.name,a.appendChild(d);const l=document.createElement("td");l.classList.add("center-align");const r=document.createElement("i");r.classList.add("fas","fa-minus","quantity-icon"),r.setAttribute("data-item-id",e),r.addEventListener("click",(()=>{n.quantity>1?(n.quantity--,i.textContent=n.quantity,updatePrice(n,u),y.textContent=`${calculateitemTotal()}`,k.textContent=`${calculateTotal()}`):(delete cartData[e],showCartModal(),updateCartCount(),y.textContent=`${calculateitemTotal()}`,k.textContent=`${calculateTotal()}`)})),l.appendChild(r);const i=document.createElement("span");i.classList.add("item-quantity"),i.textContent=n.quantity,l.appendChild(i);const s=document.createElement("i");s.classList.add("fas","fa-plus","quantity-icon"),s.setAttribute("data-item-id",e),s.addEventListener("click",(()=>{n.quantity++,i.textContent=n.quantity,updatePrice(n,u),y.textContent=`${calculateitemTotal()}`,k.textContent=`${calculateTotal()}`})),l.appendChild(s),a.appendChild(l);const u=document.createElement("td");u.classList.add("center-align"),u.textContent="₹ "+n.price*n.quantity,a.appendChild(u),t.appendChild(a)}const o=document.createElement("tr"),c=document.createElement("td");c.classList.add("footer-hr-cell"),o.appendChild(c);const d=document.createElement("td");d.classList.add("footer-hr-cell"),o.appendChild(d);const l=document.createElement("td");l.classList.add("footer-hr-cell"),o.appendChild(l);const r=document.createElement("td");r.classList.add("footer-hr-cell"),o.appendChild(r),t.appendChild(o);const i=document.createElement("tr"),s=document.createElement("td");s.setAttribute("colspan",a.length),i.appendChild(s),t.appendChild(i);const u=document.createElement("tr"),m=document.createElement("td");m.textContent="Item-Total",m.classList.add("cart-footer"),u.appendChild(m);const p=document.createElement("td");p.setAttribute("colspan","2"),u.appendChild(p);const y=document.createElement("td");y.textContent=`${calculateitemTotal()}`,y.classList.add("cart-footer"),u.appendChild(y),t.appendChild(u);const h=document.createElement("tr"),C=document.createElement("td");C.textContent="Delivery",C.classList.add("cart-footer"),h.appendChild(C);const f=document.createElement("td");f.textContent="[ Upto 2km ]",f.classList.add("cart-footer"),h.appendChild(f);const g=document.createElement("td");g.setAttribute("colspan","1"),h.appendChild(g);const v=document.createElement("td");v.textContent="₹ 20",v.classList.add("cart-footer"),h.appendChild(v),t.appendChild(h);const b=document.createElement("tr"),E=document.createElement("td");E.textContent="Total",E.classList.add("cart-footer"),b.appendChild(E);const L=document.createElement("td");L.setAttribute("colspan","2"),b.appendChild(L);const k=document.createElement("td");k.textContent=`${calculateTotal()}`,k.classList.add("cart-footer"),b.appendChild(k),t.appendChild(b);const S=document.createElement("tr"),I=document.createElement("td");I.setAttribute("colspan","2"),S.appendChild(I);const q=document.createElement("td");q.setAttribute("colspan","2"),S.appendChild(q);const $=document.createElement("button");$.textContent="Place Order",$.classList.add("submit-button"),$.addEventListener("click",(()=>{submitOrder(cartData)})),q.appendChild($),t.appendChild(S);const x=document.createElement("tr"),D=document.createElement("td");D.setAttribute("colspan",a.length),x.appendChild(D),t.appendChild(x),e.appendChild(t)}function updatePrice(e,t){t.textContent="₹ "+e.price*e.quantity}function closeCartModal(){document.getElementById("cartModal").style.display="none",isCartModalOpen=!1,document.getElementById("dark-mode-toggle").style.display="block";document.getElementById("cartModal").style.display="none"}function addToCart(e,t,n,a,o){cartData.hasOwnProperty(e)?cartData[e].quantity+=1:cartData[e]={name:t,price:n,image:a,quantity:1},updateCartCount()}function showDropdown(e){document.getElementById(`dropdown-${e}`).style.display="block"}function hideDropdown(e){document.getElementById(`dropdown-${e}`).style.display="none"}function addToCartWithSize(e,t,n){const a=document.getElementById(`dropdown-options-${e}`),o=a.options[a.selectedIndex].text;addToCart(e,`${t} (${o.split("-")[0].trim()})`,parseInt(o.split("₹")[1]),n)}function updateCartCount(){const e=document.getElementById("cart-count");let t=0;for(const e in cartData)cartData.hasOwnProperty(e)&&(t+=cartData[e].quantity);e.textContent=t}let http=new XMLHttpRequest;function toggleDarkMode(){const e=document.body;e.classList.toggle("dark-mode");const t=document.getElementById("mode-icon");e.classList.contains("dark-mode")?(t.classList.remove("fa-moon"),t.classList.add("fa-sun"),localStorage.setItem("darkMode","enabled")):(t.classList.remove("fa-sun"),t.classList.add("fa-moon"),localStorage.setItem("darkMode","disabled"))}function zoomImage(e){const t=document.getElementById("zoomed-image"),n=document.getElementById("image-zoom-container");t.src=e.src,n.style.display="block"}function closeZoomImage(){document.getElementById("image-zoom-container").style.display="none"}function increaseValue(e){var t=parseInt(document.getElementById(`number-${e}`).value,10);t=isNaN(t)?0:t,t++,document.getElementById(`number-${e}`).value=t,updateCartData(e,t)}function decreaseValue(e){var t=document.getElementById(`number-${e}`),n=parseInt(t.value,10);(n=isNaN(n)?0:n)>1?(n--,t.value=n,updateCartData(e,n)):(t.value=1,delete cartData[e],updateCartCount(),hideQuantityContainer(e))}function updateCartData(e,t){cartData.hasOwnProperty(e)&&(cartData[e].quantity=t)}function hideQuantityContainer(e){const t=document.getElementById(`number-${e}`).closest(".quantity-control");t.style.display="none",cartCount--,cartCountElement.textContent=cartCount;t.parentNode.querySelector(".add-to-cart").style.display="inline-block"}function generateAndDownloadInvoice(e,t,n,a){const o=JSON.parse(localStorage.getItem("userData")),{name:c,address:d,mobileNumber:l}=o,r=[];r.push(["Products","Quantity","Price","Total"]);for(const e in a)if(a.hasOwnProperty(e)){const t=a[e];r.push([t.name,t.quantity,`₹ ${t.price}`,"₹ "+t.price*t.quantity])}const i=Object.values(a).reduce(((e,t)=>e+t.price*t.quantity),0),s=i+20,u={content:[{text:"Chaman Dhaba",style:"header"},{text:"Pehowa, Haryana, 136128",style:"headerr"},{text:"Phone Number - +91 98967-55380",style:"headerr"},{canvas:[{type:"line",x1:0,y1:10,x2:515,y2:10,lineWidth:2}],margin:[0,20]},{text:"Invoice Details",style:"subheader"},{text:`Customer Name   -     ${c}`,style:"customerInfo"},{text:`Address                 -     ${d}`,style:"customerInfo"},{text:` Phone Number     -     ${l}`,style:"customerInfoWithSpace"},{table:{widths:["*","auto","auto","auto"],headerRows:1,alignment:"center",margin:[0,10,0,0],body:r},style:"tableStyle"},{text:`Item Total:          ₹ ${i.toFixed(2)}`,style:"total"},{text:"Service Charge:   ₹ 20.00  ",style:"totall"},{text:`Total Amount:    ₹ ${s.toFixed(2)}`,style:"totall"}],styles:{header:{fontSize:35,bold:!0,alignment:"center",margin:[0,0,0,10]},headerr:{fontSize:25,alignment:"center",margin:[0,0,0,10]},subheader:{fontSize:25,bold:!0,alignment:"center",margin:[0,10,0,5]},total:{fontSize:25,bold:!0,alignment:"right",margin:[0,60,0,0]},totall:{fontSize:25,bold:!0,alignment:"right",margin:[0,10,0,0]},tableStyle:{fontSize:15},customerInfo:{fontSize:20,alignment:"left",margin:[0,10,0,0]},customerInfoWithSpace:{fontSize:20,alignment:"left",margin:[0,10,0,20]}}};pdfMake.createPdf(u).download("invoice.pdf")}function showPopup(){var e=document.createElement("div");e.className="popup";var t=document.createElement("button");t.textContent="X",t.className="close-button",t.addEventListener("click",(function(){location.reload()}));var n=document.createElement("p");n.textContent="Order placed successfully!";var a=document.createElement("div");a.className="button-container";var o=document.createElement("button");o.textContent="Download Invoice",o.classList.add("popup-invoice-button"),o.addEventListener("click",(function(){generateAndDownloadInvoice("Chaman Dhaba","Neeraj Manchanda","+91 98967-55380",cartData)})),e.appendChild(t),e.appendChild(n),a.appendChild(o),e.appendChild(a);var c=document.createElement("div");c.className="overlay",document.body.appendChild(c),document.body.appendChild(e),c.style.display="block",e.style.display="block"}function isUserSignedUp(){return null!==localStorage.getItem("userData")}http.open("get","products.json",!0),http.send(),http.onload=function(){if(4==this.readyState&&200==this.status){let n=JSON.parse(this.responseText);function e(e){return`\n    <div class="box" >\n    <span class="dis product-price"><b>${Math.round((e.mrp-e.price.Half)/e.mrp*100)}</b>% off</span>\n    <img src="${e.image}" alt="img" onclick="zoomImage(this)">\n    <h3 class="product-name" >${e.name}</h3>\n     <div class="stars"></div>\n    <div class="dropdownn" id="dropdown-${e.id}" style="display: flex;">\n    <select class="size" id="dropdown-options-${e.id}">\n      <option value="Half">Half - ₹${e.price.Half}</option>\n      <option value="Full">Full - ₹${e.price.Full}</option>\n    </select><br><br>\n  </div>\n  <button class="btn btn-ok add-to-cart" onclick="addToCartWithSize('${e.id}', '${e.name}', '${e.image}')">ADD</button>\n  \n  <form class="quantity-control" style="display: none;">\n  <div class="value-button decrease" onclick="decreaseValue(${e.id})" value="Decrease Value"><i class="fas fa-minus-circle"></i></div>\n  <input type="number" class="number" id="number-${e.id}" value="1" readonly />\n  <div class="value-button increase" onclick="increaseValue(${e.id})" value="Increase Value"><i class="fas fa-plus-circle"></i></div>\n </form>\n\n    </div>\n    `}function t(e){return`\n  <div class="box" >\n  <span class="dis product-price"><b>${Math.round((e.mrp-e.price)/e.mrp*100)}</b>% off</span>\n  <img src="${e.image}" alt="img" onclick="zoomImage(this)">\n  <h3 class="product-name" >${e.name}</h3>\n  <span class="pricee product-price"> <b>₹ ${e.price}</b> \n  <del class="mrp">₹ ${e.mrp}</del>\n   <span class="rev"> 4.7 <i class="fas fa-star"></i></span>\n   </span>\n   <div class="stars"></div>\n  \n  <h2 class="btn add-to-cart "  onclick="addToCart('${e.id}', '${e.name}', ${e.price}, '${e.image}') ">ADD</h2>\n \n  <form class="quantity-control" style="display: none;">\n  <div class="value-button decrease" onclick="decreaseValue(${e.id})" value="Decrease Value"><i class="fas fa-minus-circle"></i></div>\n  <input type="number" class="number" id="number-${e.id}" value="1" readonly />\n  <div class="value-button increase" onclick="increaseValue(${e.id})" value="Increase Value"><i class="fas fa-plus-circle"></i></div>\n </form>\n  \n  </div>\n  </div>\n  </div>\n  `}let a="",o="",c="",d="",l="",r="",i="",s="",u="",m="",p="",y="",h="",C="";for(let f=0;f<n.length;f++){const g=n[f];f<12&&(a+=e(g),a+='\n<div class="image-zoom-container" id="image-zoom-container">\n  <span class="close-zoom" onclick="closeZoomImage()">&times;</span>\n  <img class="zoomed-image" id="zoomed-image">\n</div>\n'),f>=12&&f<17&&(o+=e(g)),f>=17&&f<24&&(c+=e(g)),f>=24&&f<26&&(d+=e(g)),f>=26&&f<28&&(l+=e(g)),f>=28&&f<32&&(r+=e(g)),f>=32&&f<41&&(i+=e(g)),f>=41&&f<43&&(s+=e(g)),f>=43&&f<46&&(s+=t(g)),f>=47&&f<53&&(u+=t(g)),f>=53&&f<59&&(m+=t(g)),f>=59&&f<65&&(p+=t(g)),f>=66&&f<71&&(y+=e(g)),f>=71&&f<74&&(h+=t(g)),f>=74&&f<77&&(C+=e(g))}document.querySelector(".paneer").innerHTML=a,document.querySelector(".mushroom").innerHTML=o,document.querySelector(".dal").innerHTML=c,document.querySelector(".kofta").innerHTML=d,document.querySelector(".chaap").innerHTML=l,document.querySelector(".chana").innerHTML=r,document.querySelector(".vegetable").innerHTML=i,document.querySelector(".rice").innerHTML=s,document.querySelector(".naan").innerHTML=u,document.querySelector(".roti").innerHTML=m,document.querySelector(".paratha").innerHTML=p,document.querySelector(".rayta").innerHTML=y,document.querySelector(".salad").innerHTML=h,document.querySelector(".chinese").innerHTML=C}},document.addEventListener("DOMContentLoaded",(function(){const e=document.body,t=document.getElementById("mode-icon");"enabled"===localStorage.getItem("darkMode")?(e.classList.add("dark-mode"),t.classList.remove("fa-moon"),t.classList.add("fa-sun")):(e.classList.remove("dark-mode"),t.classList.remove("fa-sun"),t.classList.add("fa-moon"))})),document.addEventListener("DOMContentLoaded",(function(){const e=JSON.parse(localStorage.getItem("userData"));e&&(document.getElementById("headerLogo").style.display="none",document.getElementById("userIcon").style.display="flex",document.getElementById("userIcon").textContent=e.name.charAt(0).toUpperCase())}));